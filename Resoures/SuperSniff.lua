local a=game:GetService("CollectionService")local b=game:GetService("ReplicatedStorage")local c=game:GetService("SoundService")local d=require(b._replicationFolder.PlayerWrapper):GetClient()local e=require(b._replicationFolder.Food)local f=require(b._replicationFolder.Marker)local g=require(b._replicationFolder.LightingTracker)local h=require(b._replicationFolder.FoVTracker)local i=require(b._replicationFolder.DisplayUtils)local j=require(b._replicationFolder.SoundPlayer)local k=require(b._replicationFolder.Constants)local l=require(b._replicationFolder.ShoomPile)local m=require(b._replicationFolder.CharacterData)local n=require(b._replicationFolder.CreatureInfoService)local o=3;local p=k.ShoomPileConstants;local q=require(b.Storage.ThreatsData)local r={"Food","DrinkableWater","Character","Mud","Egg","Token","NPC","ShoomPile"}local s={["Mud"]=500,["DrinkableWater"]=600,["Food"]=600,["Egg"]=600,["Character"]=900,["Token"]=2000,["NPC"]=900,["ShoomPile"]=375}local t={["Food"]={["Image"]="rbxassetid://13557510566",["Color"]=Color3.fromRGB(255,255,255),["ImageSize"]=UDim2.new(0.6,0,0.6,0),["BeamColor"]=Color3.new(1,0.321569,0.0980392)},["DrinkableWater"]={["Image"]="rbxassetid://13557513995",["Color"]=Color3.fromRGB(255,255,255),["ImageSize"]=UDim2.new(0.7,0,0.7,0),["BeamColor"]=Color3.new(0.0901961,0.831373,1)},["Character"]={["Image"]="rbxassetid://13558868225",["ImageSize"]=UDim2.new(0.65,0,0.65,0),["Color"]=nil},["Mud"]={["Image"]="rbxassetid://13049976128",["ImageSize"]=UDim2.new(0.75,0,0.75,0),["Color"]=nil},["Egg"]={["Image"]="rbxassetid://13084788104",["ImageSize"]=UDim2.new(0.75,0,0.75,0),["Color"]=Color3.new(1,0.776,0.733)},["Token"]={["Image"]="rbxassetid://15351428762",["ImageSize"]=UDim2.new(0.75,0,0.75,0),["Color"]=Color3.fromRGB(255,255,255)},["NPC"]={["GetImage"]=function()local u=d:GetCurrentCharacter()if u and u.CharacterData then local v=u.CharacterData:Get("FoodType")return(v=="Omnivore"or v=="Carnivore")and"rbxassetid://137965189809034"or"rbxassetid://14891435644"end;return"rbxassetid://14891435644"end,["ImageSize"]=UDim2.new(0.6,0,0.6,0),["Color"]=Color3.fromRGB(255,255,255)},["ShoomPile"]={["Image"]="rbxassetid://9009086352",["ImageSize"]=UDim2.new(0.6,0,0.6,0),["GetColor"]=function(w)if w then local x=w:GetAttribute("Rarity")if x and p.ShoomPiles[x]then return p.ShoomPiles[x].SniffColor end end;return Color3.fromRGB(255,255,255)end}}local y={["DrinkableWater"]=function(z,A)z.MaxDistance=s[z.Tag]*A;return z.Distance<z.MaxDistance end,["Mud"]=function(z,A)z.MaxDistance=s[z.Tag]*A;return z.Distance<z.MaxDistance end,["Food"]=function(z,A)local B=e.GetFoodFromModel(z.Root)if B then if z.Root:HasTag("Egg")then return false end;local u=d:GetCurrentCharacter()if u then local C=u.ShouldNotBeSwimming;local D=B.FoodData and B.FoodData.Underwater;if not(C and D)then z.MaxDistance=s[z.Tag]*A;if z.Distance<=z.MaxDistance then return B:CanEat()and B:HasFood()end end end end;return false end,["Egg"]=function(z,A)local u=d:GetCurrentCharacter()local B=e.GetFoodFromModel(z.Root)if B and u then if z.Root:HasTag("Egg")then if u:Get("EggStealer")then z.MaxDistance=s[z.Tag]*A;if z.Distance<=z.MaxDistance then return B:CanEat()and B:HasFood()end end end end;return false end,["Character"]=function(z,A)local u=d:GetCurrentCharacter()if z.Root~=u.Model then z.MaxDistance=s[z.Tag]*A;return z.Distance<z.MaxDistance end;return false end,["Token"]=function(z,A)if d:IsBoostActive("TokenSniffingBoost")then z.MaxDistance=s[z.Tag]*A;return z.Distance<=z.MaxDistance end;return false end,["NPC"]=function(z,A)z.MaxDistance=s[z.Tag]*A;return z.Distance<=z.MaxDistance end,["ShoomPile"]=function(z,A)z.MaxDistance=s[z.Tag]*A;if z.Distance<=z.MaxDistance then local E=l.ALL_SHOOM_PILES[z.Root:GetAttribute("Id")]return E and not E:IsHidden()end;return false end}local function F(w)local G=m:GetDataClassFromModel(w)if G then local H=G.Player;local I=string.format("%s (@%s)",H.DisplayName,H.Name)local J=G:Get("Tier")local K=G:Get("Elder")local L=n.GetSpeciesFromName(G.Species)local M=i.GetDisplayName(L.Name,L)local u=d:GetCurrentCharacter()local N=u.CharacterData:Get("Tier")local O=J==N and"Medium"or(J<N and"Low"or"High")local P=q[O].Color;local Q=q[O].Name;local R=G:Get("Aggression")and G:Get("Aggression")>0;return I,M,K and"Elder"or nil,P,H,Q,R end end;function Sniff()local u=d:GetCurrentCharacter()if not u then return end;local A=getgenv().SuperSniffDistance;f:Clear()local S=workspace.CurrentCamera.CFrame;local T={}for U,V in pairs(r)do for U,w in pairs(a:GetTagged(V))do if w.Parent then local W=w:GetPivot()local X=(S.p-W.p).Magnitude;local Y=t[V]local Z=nil;if Y.GetColor then Z=Y.GetColor(w)else Z=Y.Color end;local z={Root=w,Tag=V,Distance=X,Image=Y.GetImage and Y.GetImage()or Y.Image,ImageSize=Y.ImageSize,Color=Z,BasePivot=W}if V=="Character"then local I,L,_,a0,H,a1,R=F(w)z.Username=I;z.NameText=L;z.PrefixText=_;z.Color=a0;z.Player=H;z.HoverLabel=a1;z.IsAggressive=R end;if V=="DrinkableWater"and w.PrimaryPart then W=W+w.PrimaryPart.Size*Vector3.new(0,0.5,0)z.BasePivot=W end;table.insert(T,z)end end end;table.sort(T,function(a2,a3)return a2.Distance<a3.Distance end)local a4={}local a5={}local a6={}local a7={}local a8={}local a9={}local aa={}for U,w in pairs(T)do local ab=y[w.Tag]if ab and ab(w,A)then if w.Tag=="Food"or w.Tag=="Egg"then table.insert(a4,w)elseif w.Tag=="DrinkableWater"then table.insert(a5,w)elseif w.Tag=="Mud"then table.insert(a6,w)elseif w.Tag=="Token"then table.insert(a7,w)elseif w.Tag=="NPC"then table.insert(a8,w)elseif w.Tag=="Character"then table.insert(a9,w)elseif w.Tag=="ShoomPile"then table.insert(aa,w)end end end;f.new(a4[1])f.new(a5[1])f.new(a4[2])f.new(a5[2])for U,ac in pairs(a9)do f.new(ac,true)end;for U,ad in pairs(a6)do f.new(ad)end;for U,ae in pairs(a7)do f.new(ae)end;for U,af in pairs(a8)do f.new(af)end;for U,E in pairs(aa)do f.new(E)end;g.setLightingMode("Sniff",true)h.setModifier("Sniff",true)j.PlayLocalSound(c.Effects.Whistle)local ag=o*1.5 or o;task.delay(ag,function()g.setLightingMode("Sniff",false)h.setModifier("Sniff",false)end)end;Sniff()
