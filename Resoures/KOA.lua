local a=game:GetService("Players")local b=game:GetService("ReplicatedStorage")local c=require(b._replicationFolder.PlayerWrapper)local d=require(b._replicationFolder.GuiUtils)local e=require(b._replicationFolder.WorldspaceGuiUtils)local f=require(b._replicationFolder.Binder)local g=require(b._replicationFolder.Maid)local h=require(b._replicationFolder.CharacterData)local i=require(b._replicationFolder.OverheadHealthbar)local j=require(b._replicationFolder.safeDestroy)local k=require(b._replicationFolder.Constants)local l=b._replicationFolder.KeenObserverOverhead:WaitForChild("OverheadGui")l.MaxDistance=250;local m=a.LocalPlayer;local n=c.GetClient()local o={}local p=false;local q={}q.__index=q;function q.new(r)local s=setmetatable({},q)s.Maid=g.new()if r==m.Character then return s end;s.Model=r;s.Player=a:FindFirstChild(r.Name)s.IsLocalPlayer=s.Player==m;s.CharacterData=h.YieldForCharacterData(s.Model)if not s.CharacterData then return s end;s.Gui=l:Clone()s.Gui.Name=s.Player.Name.."KeenObserverUI"s.Gui.Enabled=true;d.ParentToWorkspaceGui(s.Gui)s.Maid:GiveTask(s.Gui)s.Healthbar=i.new(s.Player,s.Gui.Health)s.Maid:GiveTask(s.Healthbar)e.AddWorldspaceGui(s.Gui)s.Gui.Adornee=r;if not s:_checkVisibility()then return s end;if s.CharacterData and s.CharacterData.AilmentAddedSignal then s.Maid:GiveTask(s.CharacterData.AilmentAddedSignal:Connect(function()s:_checkVisibility()end))end;o[s]=true;return s end;function q._checkVisibility(s)local r=s.Model;if r then r=s.Model:FindFirstChild("Ailments")end;if r then r=r:GetAttribute("HideInfo")end;if not r then return true end;task.defer(s.Destroy,s)return false end;function q.ClearAll()for s,t in pairs(o)do s:Destroy()end end;function q.Destroy(s)o[s]=nil;j(s)end;n.CharacterChangedSignal:Connect(function()n.Maid.KeenObserverBinder=nil;local u=n:GetCurrentCharacter()if u then if u:Get("KeenObserver")then local v=f.new(k.CharacterTag,q)v:Init()n.Maid.KeenObserverBinder=v end end end)local function w(x)local u=n:GetCurrentCharacter()if not u then return end;if x then if not p then local v=f.new(k.CharacterTag,q)v:Init()n.Maid.KeenObserverBinder=v;p=true end else if p then n.Maid.KeenObserverBinder=nil;q.ClearAll()p=false end end end;return w
