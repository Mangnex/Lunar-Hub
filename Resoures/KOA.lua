local a={}a.__index=a;local b=game:GetService("Players")local c=game:GetService("ReplicatedStorage")local d=require(c._replicationFolder.PlayerWrapper)local e=require(c._replicationFolder.GuiUtils)local f=require(c._replicationFolder.WorldspaceGuiUtils)local g=require(c._replicationFolder.Binder)local h=require(c._replicationFolder.Maid)local i=require(c._replicationFolder.CharacterData)local j=require(c._replicationFolder.OverheadHealthbar)local k=require(c._replicationFolder.safeDestroy)local l=require(c._replicationFolder.Constants)local m=c._replicationFolder.KeenObserverOverhead:WaitForChild("OverheadGui")m.MaxDistance=250;local n=b.LocalPlayer;local o=d.GetClient()local p={}local q=false;function a.new(r)local s=a;local t=setmetatable({},s)t.Maid=h.new()if r==n.Character then return t end;t.Model=r;t.Player=b:FindFirstChild(r.Name)t.IsLocalPlayer=t.Player==n;t.CharacterData=i.YieldForCharacterData(t.Model)if not t.CharacterData then return t end;t.Gui=m:Clone()t.Gui.Name=t.Player.Name.."KeenObserverUI"t.Gui.Enabled=true;e.ParentToWorkspaceGui(t.Gui)t.Maid:GiveTask(t.Gui)t.Healthbar=j.new(t.Player,t.Gui.Health)t.Maid:GiveTask(t.Healthbar)f.AddWorldspaceGui(t.Gui)t.Gui.Adornee=r;if not t:_checkVisibility()then return t end;if t.CharacterData and t.CharacterData.AilmentAddedSignal then t.Maid:GiveTask(t.CharacterData.AilmentAddedSignal:Connect(function()t:_checkVisibility()end))end;p[t]=true;return t end;function a._checkVisibility(u)local v=u.Model;if v then v=u.Model:FindFirstChild("Ailments")end;if v then v=v:GetAttribute("HideInfo")end;if not v then return true end;task.defer(u.Destroy,u)return false end;function a.ClearAll(w)for x,w in pairs(p)do x:Destroy()end end;function a.Destroy(y)p[y]=nil;k(y)end;o.CharacterChangedSignal:Connect(function()o.Maid.KeenObserverBinder=nil;local z=o:GetCurrentCharacter()if z then if z:Get("KeenObserver")then local A=g.new(l.CharacterTag,a)A:Init()o.Maid.KeenObserverBinder=A end end end)local function B(C)local D=o:GetCurrentCharacter()if not D then return end;if C then if not q then local E=g.new(l.CharacterTag,a)E:Init()o.Maid.KeenObserverBinder=E;q=true end else if q then o.Maid.KeenObserverBinder=nil;a.ClearAll()q=false end end end;return B
